<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dex AGI</title>
  <meta name="color-scheme" content="light dark" />
</head>
<body>
  <header id="topbar" style="display:flex;gap:.5rem;align-items:center;padding:.5rem 1rem;">
    <button id="loginBtn">Log in</button>
    <button id="logoutBtn" hidden>Log out</button>
    <span id="userBadge" style="margin-left:auto;"></span>
  </header>

  <main id="app" style="min-height:60vh;padding:1rem;"></main>

  <!-- Use a RELATIVE path so it works on subpaths (e.g., GitHub Pages) -->
  <script type="module" src="./assets/js/main.js"></script>

  <!-- Inline test for globals -->
  <script type="module">
    import { appState, emit, on, showNotification } from './assets/js/globals.js';

    console.log("[Dex] globals loaded:", appState);
    showNotification("Globals extended!");

    on("hello", (d) => console.log("heard hello:", d));
    emit("hello", { from: "dex.html" });
    emit("debug:pong", { time: Date.now() });
  </script>
</body>
</html>
