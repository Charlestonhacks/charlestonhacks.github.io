<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ...meta tags and links as before... -->
    <link rel="stylesheet" href="styles.css">
    <!-- ...other head content... -->
</head>
<body>
    <main>
        <div id="main">
            <article class="post featured">
                <header class="major">
                    <div class="panel">
                        <div class="media-container" aria-label="Toggle mission content" tabindex="0">
                            <img id="missionImage" src="images/websitepanel.webp" alt="Big Playing Card" style="z-index: 3;" />
                            <img id="cardFrame" src="images/cardframe2.svg" alt="Card Frame" style="display:none;" />
                            <video id="missionVideo"
                                muted
                                playsinline
                                controls
                                style="display:none;opacity:0;">
                                <source src="" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                            <!-- Card Buttons -->
                            <button type="button" class="clickable-area top-left">
                                <img src="images/informationbutton.webp" alt="Info">
                            </button>
                            <button type="button" class="clickable-area top-center">
                                <img src="images/crestn.svg" alt="crest card button" />
                            </button>
                            <button type="button" class="clickable-area top-right">
                                <img src="images/innovationenginebutton.webp" alt="Innovation Engine">
                            </button>
                            <button type="button" class="clickable-area middle-left">
                                <img src="images/experiment.webp" alt="briefcase" />
                            </button>
                            <button type="button" class="clickable-area middle-right">
                                <img src="images/case.webp" alt="Beaker" />
                            </button>
                            <button type="button" class="clickable-area bottom-left">
                                <img src="images/newsbutton.webp" alt="News">
                            </button>
                            <button type="button" class="clickable-area bottom-center">
                                <img src="images/keysn.svg" alt="keys card button" />
                            </button>
                            <button type="button" class="clickable-area bottom-right">
                                <img src="images/peoplebutton.webp" alt="People">
                            </button>
                        </div>
                    </div>
                </header>
            </article>
        </div>
    </main>
    <footer>
        <!-- ...footer as before... -->
        <section class="icons-container">
            <!-- ...icons as before... -->
        </section>
    </footer>
    <script>
    // Button URLs
    const buttonURLs = [
        "Poster.html",         // top-left
        "docs.html",           // top-center
        "2card.html",          // top-right
        "https://hackathon-chs-git-main-maxs-projects-ff8c32db.vercel.app/", // middle-left
        "swag.html",           // middle-right
        "news.html",           // bottom-left
        "https://charlestonhacks.mailchimpsites.com/", // bottom-center
        "cardmatchgame.html"   // bottom-right
    ];
    // Video pool
    const videos = [
        "images/Descartesvideo.mp4",
        "images/medusa best.mp4",
        "images/medusa 1.mp4",
        "images/young medusa.mp4",
        "images/Alexandorvideo.mp4",
        "images/Elaravideo.mp4",
        "images/elara rage.mp4",
        "images/astridvideo.mp4",
        "images/aegisvideo.mp4",
        "images/wolfvideo.mp4",
        "images/merlin.mp4",
        "images/hermesvideo.mp4",
        "images/Mystery.mp4"
    ];
    // Shuffle helper
    function shuffle(array) {
        let arr = array.slice();
        for (let i = arr.length - 1; i > 0; i--) {
            let j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    }
    // Assign videos to buttons
    document.addEventListener("DOMContentLoaded", function() {
        const shuffledVideos = shuffle(videos);
        const buttons = document.querySelectorAll('.clickable-area');
        const missionVideo = document.getElementById('missionVideo');
        const cardFrame = document.getElementById('cardFrame');
        buttons.forEach((btn, i) => {
            btn.dataset.buttonIndex = i;
            btn.dataset.video = shuffledVideos[i % shuffledVideos.length];
            btn.dataset.played = "false";
            btn.dataset.url = buttonURLs[i];
        });

        // Button click handler
        buttons.forEach(btn => {
            btn.addEventListener('click', function(e) {
                if (btn.dataset.played === "false") {
                    // First click: play video and block normal navigation
                    btn.dataset.played = "true";
                    // Show video overlay
                    missionVideo.src = btn.dataset.video;
                    missionVideo.style.display = "block";
                    missionVideo.style.opacity = "1";
                    cardFrame.style.display = "block";
                    missionVideo.muted = false;
                    missionVideo.controls = true;
                    missionVideo.load();
                    missionVideo.play();
                    // Disable all buttons during video
                    buttons.forEach(b => b.disabled = true);
                    // When video ends, hide video, re-enable buttons, and next click will navigate
                    missionVideo.onended = () => {
                        missionVideo.pause();
                        missionVideo.style.display = "none";
                        missionVideo.style.opacity = "0";
                        cardFrame.style.display = "none";
                        buttons.forEach(b => b.disabled = false);
                    };
                    // Prevent navigation on first click
                    e.preventDefault();
                } else {
                    // Subsequent clicks: normal navigation
                    window.location.href = btn.dataset.url;
                }
            });
            // Keyboard accessibility
            btn.addEventListener('keydown', function(e) {
                if (e.key === "Enter" || e.key === " ") {
                    btn.click();
                }
            });
        });
    });
    </script>
</body>
</html>
