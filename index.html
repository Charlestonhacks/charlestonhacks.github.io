<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>CharlestonHacks - Home</title>
    <meta name="description" content="Join CharlestonHacks for transformative hackathons and tech meetups in Charleston, SC. Build, learn, and connect with local innovators.">
    <meta property="og:title" content="CharlestonHacks | Charleston Hackathons & Tech Events" />
    <meta property="og:description" content="CharlestonHacks promotes tech events, meetups and hackathons. Join us for exciting events and stay updated." />
    <meta property="og:image" content="images/websitepanel.webp" />
    <meta property="og:url" content="https://charlestonhacks.com" />
    <meta name="twitter:card" content="summary_large_image" />
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#ff6600">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Atmosphere and click sounds -->
    <audio id="atmosphereSound" src="sounds/atmosphere.mp3" loop></audio>
    <audio id="clickSound" src="sounds/click.mp3"></audio>
    <main>
        <div class="main-wrapper">
            <div class="panel">
                <div class="media-container">
                    <div class="card-center">
                        <img id="missionImage" src="icons/card.png" alt="Big Playing Card" />
                        <img id="cardFrame" src="images/cardframe2.svg" alt="Card Frame" style="display:none;" />
                        <video id="missionVideo" muted playsinline controls style="display:none;">
                            <source src="" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    <!-- Card Buttons -->
                    <button type="button" class="clickable-area top-left">
                        <img src="images/informationbutton.webp" alt="Info">
                    </button>
                    <button type="button" class="clickable-area top-center">
                        <img src="images/crestn.svg" alt="Crest">
                    </button>
                    <button type="button" class="clickable-area top-right">
                        <img src="images/innovationenginebutton.webp" alt="Innovation">
                    </button>
                    <button type="button" class="clickable-area middle-left">
                        <img src="images/experiment.webp" alt="Experiment">
                    </button>
                    <button type="button" class="clickable-area middle-right">
                        <img src="images/case.webp" alt="Case">
                    </button>
                    <button type="button" class="clickable-area bottom-left">
                        <img src="images/newsbutton.webp" alt="News">
                    </button>
                    <button type="button" class="clickable-area bottom-center">
                        <img src="images/keysn.svg" alt="Keys">
                    </button>
                    <button type="button" class="clickable-area bottom-right">
                        <img src="images/peoplebutton.webp" alt="People">
                    </button>
                </div>
                <!-- Vertically aligned icons beside the panel edge on desktop -->
                <section class="icons-container">
                    <a href="2card.html" aria-label="Innovation Engine"><i class="fas fa-people-arrows"></i></a>
                    <a href="https://www.linkedin.com/company/charlestonhacks" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                    <a href="https://www.instagram.com/charlestonhacks/" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="mailto:hello@charlestonhacks.com" aria-label="Email CharlestonHacks"><i class="fas fa-envelope"></i></a>
                    <a href="https://twitter.com/Descart84114619" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="https://www.facebook.com/deckerdb26354" target="_blank" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="subscribe.html" aria-label="Subscribe"><i class="fas fa-bell"></i></a>
                </section>
            </div>
        </div>
    </main>
    <footer>
        <!-- Footer content if any, leave empty or use for mobile icons if desired -->
    </footer>
    <script>
    // Button URLs in order
    const buttonURLs = [
        "Poster.html",         // top-left
        "docs.html",           // top-center
        "2card.html",          // top-right
        "https://hackathon-chs-git-main-maxs-projects-ff8c32db.vercel.app/", // middle-left
        "swag.html",           // middle-right
        "news.html",           // bottom-left
        "https://charlestonhacks.mailchimpsites.com/", // bottom-center
        "cardmatchgame.html"   // bottom-right
    ];
    // Videos in order (or shuffled if you wish)
    const videos = [
        "images/Descartesvideo.mp4",
        "images/medusa best.mp4",
        "images/medusa 1.mp4",
        "images/young medusa.mp4",
        "images/Alexandorvideo.mp4",
        "images/Elaravideo.mp4",
        "images/elara rage.mp4",
        "images/astridvideo.mp4",
        "images/aegisvideo.mp4",
        "images/wolfvideo.mp4",
        "images/merlin.mp4",
        "images/hermesvideo.mp4",
        "images/Mystery.mp4"
    ];
    function shuffle(array) {
        let arr = array.slice();
        for (let i = arr.length - 1; i > 0; i--) {
            let j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    }
    // Wait for DOM ready
    document.addEventListener("DOMContentLoaded", function() {
        const shuffledVideos = shuffle(videos);
        const buttons = document.querySelectorAll('.clickable-area');
        const missionVideo = document.getElementById('missionVideo');
        const cardFrame = document.getElementById('cardFrame');
        const atmosphereSound = document.getElementById('atmosphereSound');
        const clickSound = document.getElementById('clickSound');
        let soundStarted = false;

        // Start atmosphere sound after first user interaction (autoplay policy)
        function startAtmosphereSound() {
            if (!soundStarted) {
                atmosphereSound.volume = 0.45;
                atmosphereSound.play().catch(()=>{}); // ignore errors
                soundStarted = true;
            }
        }
        // Listen for any user gesture to start sound
        window.addEventListener('click', startAtmosphereSound, { once: true });
        window.addEventListener('keydown', startAtmosphereSound, { once: true });
        window.addEventListener('touchstart', startAtmosphereSound, { once: true });

        // Setup button data and click events
        buttons.forEach((btn, i) => {
            btn.dataset.buttonIndex = i;
            btn.dataset.video = shuffledVideos[i % shuffledVideos.length];
            btn.dataset.played = "false";
            btn.dataset.url = buttonURLs[i];
        });
        buttons.forEach(btn => {
            btn.addEventListener('click', function(e) {
                // Play click sound on every click
                if (clickSound) {
                    clickSound.currentTime = 0;
                    clickSound.volume = 0.7;
                    clickSound.play().catch(()=>{});
                }
                startAtmosphereSound();

                if (btn.dataset.played === "false") {
                    btn.dataset.played = "true";
                    missionVideo.src = btn.dataset.video;
                    missionVideo.style.display = "block";
                    missionVideo.style.opacity = "1";
                    cardFrame.style.display = "block";
                    missionVideo.muted = false;
                    // Only show controls on desktop
                    if (window.matchMedia("(max-width: 600px)").matches) {
                        missionVideo.removeAttribute('controls');
                    } else {
                        missionVideo.setAttribute('controls', '');
                    }
                    missionVideo.load();
                    missionVideo.play();
                    buttons.forEach(b => b.disabled = true);
                    missionVideo.onended = () => {
                        missionVideo.pause();
                        missionVideo.style.display = "none";
                        missionVideo.style.opacity = "0";
                        cardFrame.style.display = "none";
                        buttons.forEach(b => b.disabled = false);
                        window.location.href = btn.dataset.url;
                    };
                    e.preventDefault();
                } else {
                    window.location.href = btn.dataset.url;
                }
            });
            btn.addEventListener('keydown', function(e) {
                if (e.key === "Enter" || e.key === " ") {
                    btn.click();
                }
            });
        });

        // Video controls for desktop/mobile
        if (missionVideo) {
            if (window.matchMedia("(max-width: 600px)").matches) {
                missionVideo.removeAttribute('controls');
            } else {
                missionVideo.setAttribute('controls', '');
            }
        }
    });
    </script>
</body>
</html>
